<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>opheliagame</title><base href="/"><link rel="preconnect" href="https://fonts.gstatic.com"><link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicons/android-chrome-192x192.png"><link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/android-chrome-384x384.png"><link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="theme-color" content="#54e4e5"><meta name="author" content="opheliagame"><meta name="description" content="visuals | text | code"><meta property="og:image" content="https://opheliagame.github.io/assets/img/favicon.ico"><meta property="og:description" content="visuals | text | code"><meta property="og:title" content="opheliagame"><meta property="twitter:description" content="visuals | text | code"><meta property="twitter:title" content="opheliagame"><meta property="twitter:creator" content="@anushkatr"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;400;600&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400&display=swap" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prism-themes@1.7.0/themes/prism-material-light.css" rel="stylesheet"><link rel="stylesheet" href="/archive/assets/css/style.css"><link rel="stylesheet" href="/archive/assets/css/extra.css"><script defer="defer" src="https://unpkg.com/alpinejs@3.8.1/dist/cdn.min.js"></script><script type="module" src="/archive/assets/js/main.mjs"></script></head><body class="bg-pink-200 h-full"><div class="md:container md:mx-auto h-full flex flex-col items-center px-2 md:px-48"><div class="flex justify-between items-center w-full"><main-header></main-header><main-nav></main-nav></div><div class="px-2 w-full text-sm"><h3 class="text-lg md:text-xl font-semibold uppercase">Texture land ðŸ‘¾</h3><div class="flex flex-row gap-x-2"><main-tag name="shader"></main-tag><main-tag name="texture"></main-tag><main-tag name="2021"></main-tag><main-tag name="april"></main-tag></div><div class="text-sm md:text-lg"><p class="py-2">This is definitely not a week after the last article. And I think a part of the reason is because I haven't been studying shaders consistently. But hey, I'm back here, and so that is a good sign right? I hope it is. So today I want to talk about textures and make a simple shader that pixelates an image.</p><h3 class="text-lg font-semibold">What is a texture you say</h3><p class="py-2">Simply put, texture is shader speak for image. When getting introduced to texture, and even during this article you will come across the term texture coordinates as well. Now this concept does not have a counterpart with respect to images, but it becomes inseparable from textures when it comes to shaders. If you have a texture, you must have texture coordinates.</p><p class="py-2">And this is the way it is because shaders have the capability to wrap a texture around 3D objects and in other ways as well. That is, you can use an image to cover a 3D model, for example a cylinder, in any number of ways you can imagine. To specify which part of an image goes where on a 2D plane or a 3D object, we need texture coordinates. This will become more clear as you use them yourself in a bit.</p><h3 class="text-lg font-semibold">What are we waiting for</h3><p class="py-2">So to begin, let's write all the simple boilerplate that we need for our shader, and you should see a red screen.</p><pre class="language-glsl"><code class="language-glsl"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_ES</span></span><br><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_resolution<span class="token punctuation">;</span><br><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_mouse<span class="token punctuation">;</span><br><span class="token keyword">uniform</span> <span class="token keyword">float</span> u_time<span class="token punctuation">;</span><br><span class="token keyword">uniform</span> <span class="token keyword">sampler2D</span> u_texture_0<span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p class="py-2">You must have noticed that we have an extra uniform of type <code>sampler2D</code>, and this is our texture/image. If you are using <a href="https://marketplace.visualstudio.com/items?itemName=circledev.glsl-canvas" class="link-primary" target="_blank" rel="noopener noreferrer">glsl-canvas</a> on VSCode then you can define your texture location in the <code>settings.json</code> file of your current workspace and will have to use the name <code>u_texture_0</code> for the uniform. For more information on how to do this, you can look into the Textures section on the <a href="https://marketplace.visualstudio.com/items?itemName=circledev.glsl-canvas" class="link-primary" target="_blank" rel="noopener noreferrer">extension page</a>.</p><p class="py-2">But we are not done yet displaying our image, since we are not using the texture inside the shader at all yet. So let's go ahead and do that.</p><pre class="language-glsl"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br>    <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture_0<span class="token punctuation">,</span> st<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    gl_FragColor <span class="token operator">=</span> tex<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p class="py-2">To use a texture inside a shader, the function that glsl provides us is called <code>texture2D</code>. The first parameter for this function is the texture uniform and the second parameter is.. yes you guessed it, texture coordinates!</p><p class="py-2"><a href="https://unsplash.com/@geoffroyh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="link-primary" target="_blank" rel="noopener noreferrer"><picture><source type="image/avif" srcset="/archive/assets/img/rH5kZQKa5t-300.avif 300w, /archive/assets/img/rH5kZQKa5t-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/rH5kZQKa5t-300.jpeg 300w, /archive/assets/img/rH5kZQKa5t-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="Photo by Geoffroy Hauwen on Unsplash" loading="lazy" decoding="async" src="/archive/assets/img/rH5kZQKa5t-300.jpeg" width="600" height="549"></picture></a></p><p class="py-2">Side note: as you can probably tell from the code, texture coordinates usually range from 0 to 1 although this might not be so in some cases. But it would be safe to assume the range 0-1 for most cases.</p><h3 class="text-lg font-semibold">PPiixxeellaattee</h3><p class="py-2">Now that we can display an image inside a shader, let's move to the next step and pixelate it. For doing this, do you think we should modify the texture coordinates, i.e. how we get pixels from an image, or the image after we get it using simple texture coordinates. Let's first try using the first approach. And to get to that we'll first explore how to make a grid using a shader.</p><pre class="language-glsl"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br><br>    <span class="token keyword">vec2</span> tex_coord <span class="token operator">=</span> st<span class="token punctuation">;</span><br>    <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture_0<span class="token punctuation">,</span> tex_coord<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">float</span> grid <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>st<span class="token operator">*</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// gl_FragColor = tex;</span><br>    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p class="py-2">If we try to unpack this line which defines our <code>grid</code>, we can see that we are first upscaling or zooming out by multiplying <code>st</code> with a float value and then flooring the space to get floored values like <code>0.0, 1.0, 2.0, 3.0, 4.0..</code>. This flooring operation essentially divides our entire space into a grid. When picking randomly from this floored grid, we start to get closer to our idea of pixellation.</p><pre class="language-glsl"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br><br>    <span class="token keyword">vec2</span> tex_coord <span class="token operator">=</span> st<span class="token punctuation">;</span><br>    <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture_0<span class="token punctuation">,</span> tex_coord<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">vec2</span> grid <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span>st<span class="token operator">*</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">10.0</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// gl_FragColor = tex;</span><br>    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span><span class="token keyword">vec3</span><span class="token punctuation">(</span>grid<span class="token punctuation">.</span>x<span class="token punctuation">,</span> grid<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/Bpwau5_FVj-300.avif 300w, /archive/assets/img/Bpwau5_FVj-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/Bpwau5_FVj-300.jpeg 300w, /archive/assets/img/Bpwau5_FVj-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="shader grid" loading="lazy" decoding="async" src="/archive/assets/img/Bpwau5_FVj-300.jpeg" width="600" height="567"></picture></p><p class="py-2">Side note: If you are wondering, like I was, how <code>floor</code> operation differs from <code>fract</code> operation, try and substitute!</p><h3 class="text-lg font-semibold">Grid + texture = ?</h3><p class="py-2">Since we have all the ingredients for our recipe, let's plug them into action and see what happens!</p><pre class="language-glsl"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br><br>    <span class="token keyword">float</span> deg <span class="token operator">=</span> <span class="token number">4.0</span><span class="token punctuation">;</span><br>    <span class="token keyword">vec2</span> grid <span class="token operator">=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token function">floor</span><span class="token punctuation">(</span>st<span class="token operator">*</span>deg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">vec2</span> tex_coord <span class="token operator">=</span> st<span class="token operator">+</span>grid<span class="token punctuation">;</span><br>    <span class="token keyword">vec4</span> tex <span class="token operator">=</span> <span class="token function">texture2D</span><span class="token punctuation">(</span>u_texture_0<span class="token punctuation">,</span> tex_coord<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    gl_FragColor <span class="token operator">=</span> tex<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/q7gXTB_gSe-300.avif 300w, /archive/assets/img/q7gXTB_gSe-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/q7gXTB_gSe-300.jpeg 300w, /archive/assets/img/q7gXTB_gSe-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="almost there but not quite.." loading="lazy" decoding="async" src="/archive/assets/img/q7gXTB_gSe-300.jpeg" width="600" height="566"></picture></p><p class="py-2">Oops what are these weird lines, we don't want those? Let us go back to what we said about texture coordinates. They range from 0 to 1, and since we are adding two vectors to each other, is it not possible for them to exceed this range..? What if we take only the <code>fract</code>ional part of the resulting vector?</p><pre class="language-glsl"><code class="language-glsl"><span class="token keyword">vec2</span> tex_coord <span class="token operator">=</span> <span class="token function">fract</span><span class="token punctuation">(</span>st<span class="token operator">+</span>grid<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p class="py-2">Voila, we've done it!</p><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/DDmb4wF32Y-300.avif 300w, /archive/assets/img/DDmb4wF32Y-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/DDmb4wF32Y-300.jpeg 300w, /archive/assets/img/DDmb4wF32Y-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="mess 3" loading="lazy" decoding="async" src="/archive/assets/img/DDmb4wF32Y-300.jpeg" width="600" height="566"></picture></p><p class="py-2">You can now try playing around with these different values, maybe change how you want to define the <code>deg</code> of pixelation. Here are a few things I got while messing around.</p><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/9hF1O1p_p4-300.avif 300w, /archive/assets/img/9hF1O1p_p4-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/9hF1O1p_p4-300.jpeg 300w, /archive/assets/img/9hF1O1p_p4-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="mess 2" loading="lazy" decoding="async" src="/archive/assets/img/9hF1O1p_p4-300.jpeg" width="600" height="571"></picture></p><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/yTkV_i11OQ-300.avif 300w, /archive/assets/img/yTkV_i11OQ-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/yTkV_i11OQ-300.jpeg 300w, /archive/assets/img/yTkV_i11OQ-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="mess 1" loading="lazy" decoding="async" src="/archive/assets/img/yTkV_i11OQ-300.jpeg" width="600" height="567"></picture></p><p class="py-2"><picture><source type="image/avif" srcset="/archive/assets/img/gF5YOl0E_s-300.avif 300w, /archive/assets/img/gF5YOl0E_s-600.avif 600w" sizes="(min-width: 30em) 50vw, 100vw"><source type="image/jpeg" srcset="/archive/assets/img/gF5YOl0E_s-300.jpeg 300w, /archive/assets/img/gF5YOl0E_s-600.jpeg 600w" sizes="(min-width: 30em) 50vw, 100vw"><img alt="mess 4" loading="lazy" decoding="async" src="/archive/assets/img/gF5YOl0E_s-300.jpeg" width="600" height="570"></picture></p><p class="py-2">These looked much better in motion, but I haven't yet figured out how to use videos with Gatsby xD. You can try playing with motion as well by using the <code>u_time</code> uniform. So until next time, which will hopefully be sooner, have fun! ðŸ’ƒ</p></div></div><div class="w-full py-4 px-2 mt-auto"><main-footer></main-footer></div></div><script src="/archive/assets/js/sign.js"></script></body></html>